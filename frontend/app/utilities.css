@layer utilities {
  /* Layout & spacing anchored to Vultr's 4x8 grid system */
  .section-spacing {
    padding-block: clamp(4rem, 6vw, var(--spacing-section));
  }

  .section-spacing-sm {
    padding-block: clamp(2.5rem, 4.5vw, calc(var(--spacing-section) * 0.6));
  }

  .section-spacing-xs {
    padding-block: clamp(1.75rem, 3.5vw, calc(var(--spacing-section) * 0.45));
  }

  .section-divider {
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--color-vultr-blue-60) 35%, var(--color-vultr-light-blue), transparent);
  }

  .vultr-grid {
    @apply grid grid-cols-4 gap-x-6 gap-y-8 md:gap-x-8 md:gap-y-12;
  }

  .vultr-grid-col {
    @apply col-span-4 md:col-span-2;
  }

  .vultr-grid-wide {
    @apply col-span-4 md:col-span-3;
  }

  .vultr-grid-tight {
    @apply col-span-4 md:col-span-1;
  }

  .vultr-grid-full {
    @apply col-span-4;
  }

  .vultr-grid-offset {
    @apply col-span-4 md:col-span-2 md:col-start-2;
  }

  /* Brand-focused surface treatments */
  .vultr-gradient-border {
    position: relative;
    border-radius: calc(var(--radius-card) + 0.35rem);
  }

  .vultr-gradient-border::before {
    content: "";
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    padding: 1px;
    background:
      linear-gradient(130deg, var(--color-vultr-blue), var(--color-vultr-light-blue) 55%, var(--color-vultr-blue-60));
    -webkit-mask:
      linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
            mask-composite: exclude;
    pointer-events: none;
  }

  .vultr-glow {
    box-shadow:
      0 32px 80px -45px rgba(0, 123, 252, 0.45),
      0 18px 54px -36px rgba(82, 186, 255, 0.5);
  }

  @supports (color: color-mix(in oklab, transparent, transparent)) {
    .vultr-glow {
      box-shadow:
        0 32px 80px -45px color-mix(in oklab, var(--color-vultr-blue) 45%, transparent),
        0 18px 54px -36px color-mix(in oklab, var(--color-vultr-light-blue) 55%, transparent);
    }
  }

  .surface-dark {
    @apply bg-vultr-midnight text-white;
  }

  .surface-light {
    @apply bg-white text-vultr-navy;
  }

  .surface-contrast {
    background: linear-gradient(180deg, rgba(3, 16, 89, 0.92) 0%, rgba(38, 82, 174, 0.4) 100%);
    color: oklch(1 0 0);
  }

  :is(.dark .surface-contrast) {
    background: linear-gradient(180deg, rgba(23, 33, 71, 0.95) 0%, rgba(82, 186, 255, 0.25) 100%);
  }

  .surface-subtle {
    background: linear-gradient(180deg, rgba(201, 244, 255, 0.6) 0%, rgba(82, 186, 255, 0.1) 100%);
    color: var(--color-vultr-navy);
  }

  :is(.dark .surface-subtle) {
    background: linear-gradient(180deg, rgba(38, 82, 174, 0.4) 0%, rgba(0, 123, 252, 0.12) 100%);
    color: oklch(1 0 0);
  }

  .surface-glass {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(24px);
    border: 1px solid rgba(255, 255, 255, 0.12);
  }

  :is(.dark .surface-glass) {
    background: rgba(23, 33, 71, 0.72);
    border-color: rgba(82, 186, 255, 0.25);
    color: oklch(1 0 0);
  }

  .bg-vultr-radial {
    background:
      radial-gradient(900px 420px at 85% 15%, rgba(82, 186, 255, 0.5), transparent 60%),
      linear-gradient(180deg, var(--color-vultr-navy), var(--color-vultr-blue));
  }

  /* Icon sizing guided by Vultr iconography guardrails */
  .size-icon-3xs {
    width: 0.75rem;
    height: 0.75rem;
  }

  .size-icon-2xs {
    width: 0.875rem;
    height: 0.875rem;
  }

  .size-icon-xs {
    width: 1rem;
    height: 1rem;
  }

  .size-icon-sm {
    width: 1.125rem;
    height: 1.125rem;
  }

  .size-icon-md {
    width: 1.5rem;
    height: 1.5rem;
  }

  .size-icon-lg {
    width: 2rem;
    height: 2rem;
  }

  .size-icon-xl {
    width: 2.5rem;
    height: 2.5rem;
  }

  .size-icon-2xl {
    width: 3rem;
    height: 3rem;
  }

  .size-icon-3xl {
    width: 3.5rem;
    height: 3.5rem;
  }

  @media (min-width: 640px) {
    .sm\:size-icon-3xs {
      width: 0.75rem;
      height: 0.75rem;
    }
    .sm\:size-icon-2xs {
      width: 0.875rem;
      height: 0.875rem;
    }
    .sm\:size-icon-xs {
      width: 1rem;
      height: 1rem;
    }
    .sm\:size-icon-sm {
      width: 1.125rem;
      height: 1.125rem;
    }
    .sm\:size-icon-md {
      width: 1.5rem;
      height: 1.5rem;
    }
    .sm\:size-icon-lg {
      width: 2rem;
      height: 2rem;
    }
    .sm\:size-icon-xl {
      width: 2.5rem;
      height: 2.5rem;
    }
    .sm\:size-icon-2xl {
      width: 3rem;
      height: 3rem;
    }
    .sm\:size-icon-3xl {
      width: 3.5rem;
      height: 3.5rem;
    }
  }

  @media (min-width: 768px) {
    .md\:size-icon-3xs {
      width: 0.75rem;
      height: 0.75rem;
    }
    .md\:size-icon-2xs {
      width: 0.875rem;
      height: 0.875rem;
    }
    .md\:size-icon-xs {
      width: 1rem;
      height: 1rem;
    }
    .md\:size-icon-sm {
      width: 1.125rem;
      height: 1.125rem;
    }
    .md\:size-icon-md {
      width: 1.5rem;
      height: 1.5rem;
    }
    .md\:size-icon-lg {
      width: 2rem;
      height: 2rem;
    }
    .md\:size-icon-xl {
      width: 2.5rem;
      height: 2.5rem;
    }
    .md\:size-icon-2xl {
      width: 3rem;
      height: 3rem;
    }
    .md\:size-icon-3xl {
      width: 3.5rem;
      height: 3.5rem;
    }
  }

  @media (min-width: 1024px) {
    .lg\:size-icon-3xs {
      width: 0.75rem;
      height: 0.75rem;
    }
    .lg\:size-icon-2xs {
      width: 0.875rem;
      height: 0.875rem;
    }
    .lg\:size-icon-xs {
      width: 1rem;
      height: 1rem;
    }
    .lg\:size-icon-sm {
      width: 1.125rem;
      height: 1.125rem;
    }
    .lg\:size-icon-md {
      width: 1.5rem;
      height: 1.5rem;
    }
    .lg\:size-icon-lg {
      width: 2rem;
      height: 2rem;
    }
    .lg\:size-icon-xl {
      width: 2.5rem;
      height: 2.5rem;
    }
    .lg\:size-icon-2xl {
      width: 3rem;
      height: 3rem;
    }
    .lg\:size-icon-3xl {
      width: 3.5rem;
      height: 3.5rem;
    }
  }

  /* Vultr digital typography scale */
  .text-digital-h1 {
    font-size: clamp(2.75rem, 3vw + 2rem, var(--text-display-1));
    line-height: var(--leading-display-1);
    letter-spacing: -0.015em;
  }

  :where(.text-digital-h1) {
    font-weight: 300;
  }

  .text-digital-h2 {
    font-size: clamp(2.125rem, 1.5vw + 1.75rem, var(--text-display-2));
    line-height: var(--leading-display-2);
    letter-spacing: -0.01em;
  }

  :where(.text-digital-h2) {
    font-weight: 300;
  }

  .text-digital-h3 {
    font-size: clamp(1.5rem, 0.9vw + 1.25rem, 2rem);
    line-height: 1.25;
    letter-spacing: -0.005em;
  }

  :where(.text-digital-h3) {
    font-weight: 300;
  }

  .text-body {
    font-size: var(--text-body-lg);
    line-height: 1.32;
    letter-spacing: 0.005em;
  }

  :where(.text-body) {
    font-weight: 300;
  }

  .text-body-sm {
    font-size: 1.0625rem;
    line-height: 1.4;
    letter-spacing: 0.01em;
  }

  :where(.text-body-sm) {
    font-weight: 300;
  }

  .text-body-xs {
    font-size: 0.9375rem;
    line-height: 1.5;
    letter-spacing: 0.015em;
  }

  :where(.text-body-xs) {
    font-weight: 300;
  }

  .text-body-lg {
    font-size: calc(var(--text-body-lg) * 1.18);
    line-height: 1.28;
    letter-spacing: 0.0025em;
  }

  :where(.text-body-lg) {
    font-weight: 300;
  }

  .text-cta {
    font-size: var(--text-cta);
    line-height: var(--leading-cta);
    letter-spacing: 0.02em;
    text-transform: uppercase;
  }

  :where(.text-cta) {
    font-weight: 600;
  }

  .eyebrow {
    font-size: 0.75rem;
    letter-spacing: 0.24em;
    text-transform: uppercase;
  }

  :where(.eyebrow) {
    font-weight: 600;
    color: var(--color-vultr-blue-20);
  }

  :is(.dark .eyebrow) {
    color: var(--color-vultr-light-blue);
  }

  .text-balance {
    text-wrap: balance;
  }

  @media (min-width: 640px) {
    .sm\:text-body-xs {
      font-size: 0.975rem;
      line-height: 1.55;
    }
    .sm\:text-body-sm {
      font-size: 1.125rem;
      line-height: 1.45;
    }
    .sm\:text-body {
      font-size: var(--text-body-lg);
      line-height: 1.36;
    }
    .sm\:text-body-lg {
      font-size: calc(var(--text-body-lg) * 1.22);
      line-height: 1.3;
    }
  }

  @media (min-width: 768px) {
    .md\:text-body-xs {
      font-size: 1rem;
      line-height: 1.55;
    }
    .md\:text-body-sm {
      font-size: 1.1875rem;
      line-height: 1.45;
    }
    .md\:text-body {
      font-size: calc(var(--text-body-lg) * 1.04);
      line-height: 1.36;
    }
    .md\:text-body-lg {
      font-size: calc(var(--text-body-lg) * 1.26);
      line-height: 1.32;
    }
  }

  @media (min-width: 1024px) {
    .lg\:text-body-xs {
      font-size: 1rem;
      line-height: 1.58;
    }
    .lg\:text-body-sm {
      font-size: 1.25rem;
      line-height: 1.45;
    }
    .lg\:text-body {
      font-size: calc(var(--text-body-lg) * 1.08);
      line-height: 1.38;
    }
    .lg\:text-body-lg {
      font-size: calc(var(--text-body-lg) * 1.32);
      line-height: 1.34;
    }
  }
}
